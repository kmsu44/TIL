---
date: 2024-04-08
category: JS
tags:
---
자바스크립트는 싱글 스레드를 사용하기 때문에 메인 스레드가 block되는 경우가 발생한다.
따라서 Worker를 통해서 백그라운드 스레드에서 스크립트를 실행할 수 있다.

### 서비스 워커
> 웹앱의 캐시를 관리하기 위해 웹 브라우저에서 실행되는 스크립트를 말한다.

사용
- 웹 푸시 알림 서비스
- 백그라운드 동기화 기능
- 네트워크 인터셉트 및 캐싱
특징
- 생명주기는 웹페이지와 별개로 작용
- 도메인당 한 개의 service worker를 등록하고 활성화 시킬 수 있다.
- 웹페이지가 닫히더라도 비활성화 되지 않는다. (브라우저 창이 닫히더라도 푸시 알림을 받을 수 있음)

#### 서비스 워커에 문제가 생긴다면 클라이언트는 어떻게 되는가?
- 캐싱 문제
	- 캐시 업데이트 로직에 문제가 있으면 오래된 콘텐츠를 볼 수 있다.
- 네트워크 요청 관리 문제
	- 가로채기 실패 : 요청이 네트워크로 직접 전송되어 예상치 못한 지연이 발생 하거나 오프라인에서 리소스를 사용할 수 없게됨
- 백그라운드 동기화 및 푸시 알림
	- 사용자가 중요한 업데이나 알림을 놓칠 수 있다.

### Web Workers
> 스크립트 연산을 백그라운드 스레드에서 쉽게 할 수 있도록 도와주는 기능

메인 스레드와 분리할 수 있기 때문에, 무거운 작업을 하는 동안 메인 스레드의 작업에 부하를 주지 않고 진행할 수 있다.

단점 
- Dom제어 및 window객체의 일부 함수가 메인 스레드에서만 가능함
- 메인 스레드와 web worker간 데이터 전송 시 비용이 발생


서비스워커는 주로 네트워크 요청의 캐싱과 오프라인 기능을 제공하는 데 중점을 두고 있으며, 웹워커는 메인 스레드를 방해하지 않고 백그라운드에서 복잡한 작업을 수행하는 데 사용됩니다.



> 참고
> - https://github.com/wonkooklee/today-i-learned/blob/main/categories/web-apis/web-worker/web-worker-and-service-worker.md
> - https://medium.com/hcleedev/web-web-worker-사용법과-주의할-점-webpack-메모리-문제-테스트-모킹-2d77c5b23afe
> - https://tech.kakao.com/2021/09/02/web-worker

